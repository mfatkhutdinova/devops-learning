# SQS
SQS - Simple Queue Service

Самый первый сервис AWS   
SQS - это сервис Очереди сообщений, который позволяет засылать сообщения в Очередь и изымать эти сообщения из Очереди.  
Работает как временное хранилище сообщений с гарантированной доставкой хотя бы раз.   
Позволяет делать разъединение "Decouple" компонентов системы.   

Размер сообщения ограничен в 256КВ текста в любом формате.   
Формат - Json   

Виды:  
1. Standard Queue - при операции pull не гарантировано FIFO - First In First Out   
2. FIFO Queue - при операции pull гарантирует FIFO, только это стоит дороже.  

Чтобы FIFO было бесплатным в Standard Queue, добавьте в сообщение index код. И при pull проверяйте, что после сообщения с номером 3, вы получаете сообщение с номером 4.   
Если нет, то делайте еще раз pull.  

Примеры использования:  
1. Online магазин, люди делают зазазы и эти заказы в виде сообщений засылаются в SQS.  
В этом сообщении есть:  
    - список покупок  
    - адерс покупателя   
    - данные по оплате

На складе сообщения обрабатываются, отсылается заказ и закрывается заказ. Сообщние обработано. 
Producers - тот, кто генерирует сообщения   
Consumer - тот, кто обрабатывает сообщения  
  
2. Тот же Online магазин с клиентами VIP и обычными.   
Вы хотите, чтобы VIP заказы исполнялись ПРЕЖДЕ ВСЕГО, перед любым обычным сообщением.  
В этом случае, у нас две очереди: с VIP клиентами и обычными.  
На скаде сообщения также обрабатываются, но сначала обрабатываются сообщения из очереди с VIP клинтеми. И если только она пуста, то смотрят заказы обычных клиентов.   

Важные данные о SQS на экзамене:  
1. Pull Based System - система вытаскивания сообщений  
2. 256 кб - лимит на одно сообщение в любом текстовом формате  
3. Retention Period - срок хранения сообщений в очереди, от 1 мин до 14 дней. По умолчанию - 4 дня.  
4. Visibily TimeOut - время, на которое сообщение исчезает из очередипосле того, какего вытащили. Если не было получено подтверждение, что сообщение обработано (DeleteMessage), то оно опять появлется в очереди.
Меняется командой ChangeMessageVisiblity. Максимум 12 часов, по умолчанию - 30 сек.  
5. Long Polling - задержка проверки новых сообщений в очереди, максимум 20 секунд. За каждый пуллинг платим деньги.  
6. InFlight Mesages in Standard Queue = 120 000шт. Кол-во сообщений, которые могут быть в очереди.  
7. InFlight Mesages in FIFO Queue = 20 000шт.  
8. Dead-Letter Queue - сообщения, которые не получается обработать.   
9. Когда в вопросе спращивается про о Decouple компонентах, ответ Amazon SQS.  
