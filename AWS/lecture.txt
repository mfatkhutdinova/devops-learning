https://www.youtube.com/watch?v=WaSH9FHqWR0&list=PLg5SS_4L6LYsxrZ_4xE_U95AtGsIB96k9&index=3

Сертификаты:
- Architecture
- Developer
- Architecture Professional
- Devops

Region - географическое место расположения
Availability Zone - изолированный дата центр

Сервисы:
Amazon EC2 - сервисы (инстансы)
Elastic Load Balancing - балансер
Elastic Load beanstalk - можно загрузить одним арзивом zip и все будет работать
Amazon Cloud Front - мини сервера, которые хранят кеш (статистическая информация)
Amazon CloudWatch - для мониторинга, алертинга инфраструктуры
Amazon S3 - хранилище данных
Amazon Glaicer - тоже хранилище, но данные можно получить не сразу, а через 3-4 часа
Amazon EFS - диск можно приаттачить к нескольким серверам (монтирование)
AWS CloudFormation - шаблон инфраструктуры. Можно описать, сколько инстансов поднять, какие сети, фаерволы, правила и т.д. Инфраструктура как код.
AWS OpsWorks - автоматизация инфраструктуры. Работает с Chef-ом
Amazon RDS - база данных (SQL)
Amazon DynamoDB - MongoDB
Amazon Redshift - быстрая система анализа данных
Amazon EMR - работа с BigData (Hadoop)
IAM - секьюрность, пермишены, юзеры, группы и т.д.
Amazon VPC - virtual private cloud, сети
Amazon Route 53 - DNS. Тут можно купить домены
Amazon SES - сервер emal-ов
Amazon SNS - нотификация. Посылаем email-ы, sms-ки и т.д.
Amazon SQS - тоже для нотификации

Install AWS CLI
sudo apt-get install aws

aws configure
ввести Key ID и Access key
Эти данные можно получить при создании юзера в AWS
Region (default, потом можно поменять) - eu-central-1
Format - yaml/json/text

cd ./aws
- config
- credentials

aws ec2 desctibe-instances  -- описание всех инстансов

S3 - Simple Storage Service
Хранилище данных

Гарантируется:
- 99.99% Availability (файлы будут доступны сразу же)
- 99.99999999999 Duravility (файлы не пропадут)

Используется для:
- Backup and Recovery
- Data Archiving
- Big data analytics
- Статические веб-сайты
- Internet Share Drive

Максимальный размер файла/объекта 5 тб.
Маскимальный размер файла на один PUT = 5 гб
Большие файлы можно загружать через Multipart Upload

Типы хранения объектов:
1. Amazon S3 Standard
2. Amazon S3 Standard - Infrequent Access
3. Reduced Redundancy Storage
4. Amazon Glacier  (нужно подождать 4-5 часов)

Действия, которые можно сделать с S3:
- Versioning (нельзя отключить, можно только приостановить) - делает различные версии для вашего бакета
- Logging - создает логи. Занимает около часа времени
- Static Website Hosting - можно просто создать статический веб сайт 
- Tags
- Cross-region replication - отправляет копии файлов из бакета одного региона в другой бакета из другого региона.
Чтобы включить опцию, нужно допом включить версионирование. Файлы, созданные до репликации не будут перенесены.
- Transfer acceleration
- Events
- Requester pays

Имя bucket должно быть уникальным для всех
По умолчанию можно создать 100 бакетов, но по запросу можно увеличить

Bucket policy в формате json записываешь правила, аля user1 может смотреть директорию, вторую директорию нельзя и т.д.
Management - Lifecycle - можно настроить правила, через сколько дней переводить файлы в другие типы хранения данных. Это нужно, чтобы меньше платить.

Виртуальные сервера EC2 - Elastic Compute Cloud
Виды серверов: 
1. On demand - платим за фиксированную ставку
2. Spot - ставки. Стиавите условие, я готов платить 10 центов за 10 серверов в час. Если у Amazon юудут скидки и вы попадете под условие, то ваши машины включатся 
Если машины выключается автомат из-за Amazon, то за последний час вы не платите. Это не ваша вина. 
3. Reserved (1-3 year) - резерв машины на несколько лет за фиксированную цену. 
4. Scheduled Reserved (daily. weekly. monthly) - тоже резверв, но меньший период. Цена меньше, чем в demand.
5. Dedicated Hosts - арендуете весь вервер, а не кусочек. Нужно иногда для лицензий. 

Типы серверов: 
T - General Purpose 
M - General Purpose 
C - Compute Optimazed 
F - FPGA Optimized 
G,P - GPU Optimized 
X,R - RAM Memory Optimized 
D,I - Storage Optimized 

EBS - Elastic Block Store (hard disks)
Типы дисков:
1. Root-Boot: 
  - General Purpose SSD (GP2) up to 10.000 iops 
  - Provisioned IOPS SSD (IO1) up to 20.000 iops 
  - Magnetic 

2. Other: 
  - Thoughput Optimized HDD (ST1)
  - Cold HDD (SC1)

Instance - виртуальный сервер 
Volume - HDD/SSD диск

Snapshot - резервная копия Volume 
AMI - резервня копия Instance 

AMI - Amazon Machine Images 

Reboot Instance - инстанс будет работать в том же дата центре.
Stop, Start - инстанс будет работать в другом дата центре, ip адрес поменяется 

Bootstrapping 
При настройке инстанса в разделе Advanced можно написать код, который должен выполниться при настройке инстанса. 
Лог можно посмотреть в /var/log/cloud-init-output.log 


Private IP - адрес доступный внутри сети. Постоянный и не изменяется
Public IP - адрес доступный в интернете. 
Временный. Изменяется при Stop, Start сервера. Не изменяется при Reboot сервера
Elastic IP - адрес доступный в интернете. Постоянный и не изменяется. Аттачивается к серверу 
Лимит: 5 адресов для каждого региона 

Можно добыть инфу о вашем сервере, используя ip адрес - 
http://169.254.169.254/latest/meta-data/
Удобно использовать, потому что, например ifconfig выдает куча инфы и нужно вырезать 

Elastic Load Balancer 
Отсылает трафик на сервисы равномерно. Если млн ревестов в секунду, то через Support нужно запрашивать Prewarm load balancer 

Auto Scaling Group:
Vertical Saling - t2.micro -> t2.meduim -> c4.xlarge 
Horizontal Saling - это когда при нехватке ресурсов добавляешь кол-во сервисов 

Launch Configuration: 
описывает какой сервер запускать: тип, какие диски прикреплять, ssh key, userDate script 
Нельзя заменить, можно только скопировать и создать новый 

Auto Scaling Group:
описывает сколько серверов запускать, когда запускать, а также когда убивать

Subnet in AZ: какие AZ использовать для запуска серверов 
Min: минимальное кол-во Running серверов
Max: максимальное кол-во Running серверов 
Desired: желаемое текущее кол-во серверов 
LoadBalancer: какой ELB присоединить ко всем серверам 
Scale OUT: когда добавлять серверы 
Scale IN: когда убивать серверы










